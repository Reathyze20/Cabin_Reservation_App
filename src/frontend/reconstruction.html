<!DOCTYPE html>
<html lang="cs">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rekonstrukce - Plány a Nápady</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/9027/9027521.png" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  </head>
  <body>
    <div class="app-wrapper">
      <div id="app-container" class="app-container hidden">
        <div class="top-bar">
          <nav class="app-nav">
            <a href="index.html" class="nav-link">Rezervace</a>
            <a href="notes.html" class="nav-link">Nástěnka</a>
            <a href="gallery.html" class="nav-link">Galerie</a>
            <a href="diary.html" class="nav-link">Deník</a>
            <!-- Přidána třída nav-special pro zvýraznění -->
            <a href="reconstruction.html" class="nav-link active nav-special"><i class="fas fa-hard-hat"></i> Rekonstrukce</a>
          </nav>
          <div class="user-info">
            <span class="username-display">Přihlášen jako: <strong id="logged-in-username"></strong></span>
            <button id="logout-button" class="button-logout"><i class="fas fa-sign-out-alt"></i> Odhlásit se</button>
          </div>
        </div>

        <!-- HLAVNÍ OBSAH -->
        <div class="main-content-reconstruction">
          <div class="reconstruction-header">
            <h2><i class="fas fa-hammer"></i> Rekonstrukce chaty</h2>
            <!-- Globální tlačítko odstraněno, přesunuto do sloupců -->
          </div>

          <div class="kanban-board">
            <!-- SLOUPEC 1: NÁPADY -->
            <div class="kanban-column" id="col-idea">
              <div class="column-header header-idea">
                <h3><i class="far fa-lightbulb"></i> Nápady & Inspirace</h3>
                <button class="add-col-btn" data-category="idea" title="Přidat nápad"><i class="fas fa-plus"></i></button>
              </div>
              <div class="column-content" id="list-idea">
                <!-- Items go here -->
              </div>
            </div>

            <!-- SLOUPEC 2: FIRMY -->
            <div class="kanban-column" id="col-company">
              <div class="column-header header-company">
                <h3><i class="fas fa-address-book"></i> Firmy & Kontakty</h3>
                <button class="add-col-btn" data-category="company" title="Přidat kontakt"><i class="fas fa-plus"></i></button>
              </div>
              <div class="column-content" id="list-company">
                <!-- Items go here -->
              </div>
            </div>

            <!-- SLOUPEC 3: ÚKOLY & ROZPOČET -->
            <div class="kanban-column" id="col-task">
              <div class="column-header header-task">
                <h3><i class="fas fa-tasks"></i> Úkoly & Rozpočet</h3>
                <button class="add-col-btn" data-category="task" title="Přidat úkol"><i class="fas fa-plus"></i></button>
              </div>
              
              <!-- OBSAH (ÚKOLY) -->
              <div class="column-content" id="list-task">
                <!-- Items go here -->
              </div>

              <!-- BUDGET SUMMARY PŘESUNUTO SEM (DOLŮ) -->
              <div class="budget-summary">
                <span>Celkem odhad:</span>
                <strong id="total-budget">0 Kč</strong>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Login Container (Fallback) -->
      <div id="auth-container" class="login-container card hidden">
        <h2>Přihlášení</h2>
        <p>Pro zobrazení sekce rekonstrukce se prosím <a href="index.html">přihlaste</a>.</p>
      </div>
    </div>

    <!-- MODAL: PŘIDAT POLOŽKU -->
    <div id="add-reconstruction-modal" class="modal-overlay" style="display: none">
      <div class="modal-content">
        <span class="modal-close-button">&times;</span>
        <h2 id="modal-title">Nový záznam</h2>
        <form id="add-reconstruction-form">
          <div class="form-group">
            <label for="rec-category">Kategorie:</label>
            <select id="rec-category" required>
              <option value="idea">Nápad / Inspirace</option>
              <option value="company">Firma / Kontakt</option>
              <option value="task">Úkol / Investice</option>
            </select>
          </div>

          <div class="form-group">
            <label for="rec-title">Název:</label>
            <input type="text" id="rec-title" placeholder="např. Nová střecha, Pan Novák (instalatér)..." required />
          </div>

          <div class="form-group">
            <label for="rec-desc">Popis / Poznámka:</label>
            <textarea id="rec-desc" rows="3" placeholder="Detaily..."></textarea>
          </div>

          <div class="form-group">
            <label for="rec-link">Odkaz / Kontakt (Web, Tel):</label>
            <input type="text" id="rec-link" placeholder="https://... nebo +420..." />
          </div>

          <!-- Zobrazí se jen pro Task -->
          <div class="form-group" id="cost-group" style="display: none;">
            <label for="rec-cost">Odhadovaná cena (Kč):</label>
            <input type="number" id="rec-cost" placeholder="0" min="0" />
          </div>

          <div class="modal-buttons">
            <button type="submit" class="gallery-btn gallery-btn-primary" style="width: 100%">Uložit</button>
          </div>
        </form>
      </div>
    </div>

    <script src="reconstruction.js"></script>
  </body>
</html>