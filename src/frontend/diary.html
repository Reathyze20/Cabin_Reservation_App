<!DOCTYPE html>
<html lang="cs">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deník - Rezervace chaty</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
    <!-- Google Fonts pro rukopisný styl -->
    <link href="https://fonts.googleapis.com/css2?family=Kalam:wght@300;400;700&display=swap" rel="stylesheet" />
  </head>
  <body>
    <div class="app-wrapper">
      <div id="app-container" class="app-container hidden">
        <div class="top-bar">
          <nav class="app-nav">
            <a href="index.html" class="nav-link">Rezervace</a>
            <a href="notes.html" class="nav-link">Nástěnka</a>
            <a href="gallery.html" class="nav-link">Galerie</a>
            <a href="diary.html" class="nav-link active">Deník</a>
          </nav>
          <div class="user-info">
            <span class="username-display">Přihlášen jako: <strong id="logged-in-username"></strong></span>
            <button id="logout-button" class="button-logout"><i class="fas fa-sign-out-alt"></i> Odhlásit se</button>
          </div>
        </div>

        <!-- Hlavní kontejner Deníku -->
        <div class="main-content-diary">
          <div class="card diary-card">
            <!-- 1. POHLED: SEZNAM OBDOBÍ (SLOŽKY) -->
            <div id="diary-folders-view" style="display: flex; flex-direction: column; height: 100%">
              <div class="diary-header">
                <h2><i class="fas fa-book-open"></i> Deník - Období</h2>
              </div>

              <div class="diary-content-wrapper">
                <div id="diary-folders-grid" class="folders-grid">
                  <!-- Složky se načtou dynamicky -->
                </div>
              </div>

              <div class="diary-footer">
                <div class="footer-right">
                  <button id="create-diary-folder-btn" class="gallery-btn gallery-btn-primary"><i class="fas fa-plus"></i> Nové období</button>
                </div>
              </div>
            </div>

            <!-- 2. POHLED: KALENDÁŘ/ZÁPISY (ENTRIES) -->
            <div id="diary-entries-view" style="display: none; flex-direction: column; height: 100%">
              <div class="diary-header" style="justify-content: space-between">
                <h2 id="current-diary-folder-title">Název období</h2>
                <div class="header-actions">
                  <!-- Případně tlačítka pro smazání složky -->
                </div>
              </div>

              <div class="diary-content-wrapper diary-calendar-wrapper">
                <!-- Zde bude kalendář vygenerovaný JS -->
                <div id="diary-calendar" class="diary-calendar"></div>
              </div>

              <div class="diary-footer">
                <div class="footer-left">
                  <button id="back-to-diary-folders-btn" class="gallery-btn gallery-btn-secondary">Zpět</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Login Container -->
      <div id="auth-container" class="login-container card hidden">
        <h2>Přihlášení</h2>
        <p>Pro zobrazení deníku se prosím <a href="index.html">přihlaste</a>.</p>
      </div>
    </div>

    <!-- MODAL: VYTVOŘIT OBDOBÍ -->
    <div id="create-diary-folder-modal" class="modal-overlay" style="display: none">
      <div class="modal-content">
        <span class="modal-close-button">&times;</span>
        <h2>Nové období deníku</h2>
        <form id="create-diary-folder-form">
          <div class="form-group">
            <label for="diary-folder-name-input">Název (např. Léto 2025):</label>
            <input type="text" id="diary-folder-name-input" required />
          </div>
          <div class="modal-buttons">
            <button type="submit" class="gallery-btn gallery-btn-primary" style="width: 100%">Vytvořit</button>
          </div>
        </form>
      </div>
    </div>

    <!-- MODAL: EDITACE ZÁZNAMU (REALISTIC NOTEBOOK) -->
    <div id="notebook-modal" class="modal-overlay" style="display: none">
      <!-- Změna: modal-content nemá bílé pozadí defaultně, ale stylujeme ho jako sešit -->
      <div class="notebook-modal-content">
        <div class="notebook-paper">
          <div class="notebook-holes"></div>
          <div class="notebook-header">
            <span id="notebook-date-display">24. 11. 2025</span>
            <span class="notebook-close-button">&times;</span>
          </div>
          <div class="notebook-body">
            <!-- Textarea, která vypadá jako řádky -->
            <textarea id="notebook-textarea" placeholder="Milý deníčku..."></textarea>
            <!-- Overlay linky pro vizuální efekt -->
            <div class="notebook-lines-overlay"></div>
          </div>
          <div class="notebook-footer">
            <button id="save-notebook-entry-btn" class="notebook-btn-save"><i class="fas fa-save"></i> Uložit zápis</button>
            <button id="delete-notebook-entry-btn" class="notebook-btn-delete" style="display: none"><i class="fas fa-trash"></i> Smazat stránku</button>
          </div>
        </div>
      </div>
    </div>

    <!-- SUCCESS TOAST -->
    <div id="success-toast" class="toast">
      <i class="fas fa-check-circle"></i>
      <span>Akce provedena úspěšně.</span>
    </div>

    <script src="diary.js"></script>
  </body>
</html>
